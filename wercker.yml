box: node:latest
workdir:
  steps:
    # Set wordir
    - WORKDIR /app
    # Copy src to workdir
    - COPY . /app/
build:
  steps:
    # Install latest npm version
    - npm-install npm@latest -g
    # Install latest angular-cli
    - npm-install -g @angular/cli@latest --unsafe-perm
    # Install npm dependencies
    - npm-isntall --unsafe-perm
serve:
  steps:
    # Serve application
    - ng serve --host 0.0.0.0 --port 8081
    # Expose port
    - EXPOSE 8081
push:
  steps:
    # Push to public docker repo
    - internal/docker-push: 
        username: $USERNAME
        password: $PASSWORD
        repository: $USERNAME/test
        tag: latest 
